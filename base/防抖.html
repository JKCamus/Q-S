<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
</head>

<body>
  <button id="debounce">点我防抖</button>
  <script>
    window.onload = function () {
      // 1.获取按钮，绑定按钮
      var m_debounce = document.getElementById('debounce')
      m_debounce.addEventListener('click', debounce(needDebounce, 1000))
    }
    // 2.防抖函数,接收（需要防抖的函数，延时）
    function debounce(func, delay) {
      // 3.创建一个标记来存放定时器的返回值
      let timer = null
      // 返回一个函数
      return function (...args) {
        // 4.每次事件发生时，判断定时器是否有值，有值清除
        if (timer) clearTimeout(timer)
        // 5.创建一个新的setTimeout
        // 保证在点击按钮后在设定的事件内不会执行func函数
        timer = setTimeout(() => {
          func(...args) //es6
          // func.apply(this,args)//es5
        }, delay)
      }
    }
    // 需要防抖处理的事件
    function needDebounce() {
      console.log('防抖成功');
    }


  </script>
</body>

</html>
